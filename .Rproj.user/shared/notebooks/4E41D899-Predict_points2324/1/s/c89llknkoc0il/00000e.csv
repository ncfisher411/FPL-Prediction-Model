"0","library(openxlsx)"
"0","outfield <- read.csv(""outfield_new_players.csv"")"
"0",""
"0","points <- fwd$Points %>% as.matrix()"
"0","temp <- trends %>% ungroup() %>% filter(Position==""FWD"") %>% "
"0","  select(-c(""Points"", ""Bonus"", ""Position"")) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.)) %>% data.matrix()"
"0","one <- glmnet(temp, points, alpha=0)"
"0","five <- cv.glmnet(temp, points, alpha=0)"
"0","lambda <- five$lambda.min"
"0",""
"0","fwd <- trends %>% ungroup() %>% filter(Position==""FWD"") %>%"
"0","  select(all_of(c(""Player"", ""Points"")), all_of(f_rows)) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.))"
"0",""
"0","train_index <- sample(1:nrow(fwd), nrow(fwd) * 0.8)"
"0","train_data <- fwd[train_index, ]"
"0","fwd_xtrain <- train_data %>% select(-c(""Player"", ""Points""))"
"0","  "
"0","fwd_ytrain <- train_data %>% select(Points) %>% data.matrix()"
"0","fwd_test_data <- fwd[-train_index, ]"
"0","fwd_xtest <- test_data %>% select(-c(""Player"", ""Points"")) %>% data.matrix()"
"0","fwd_ytest <- test_data %>% select(Points) %>% data.matrix()"
"0","#dim(train_data)"
"0","#dim(test_data)"
"0",""
"0","fwd_model <- glmnet(fwd_xtrain, fwd_ytrain, alpha=0, lambda = lambda)"
"0",""
"0","temp <- outfield %>% filter(Position==""FWD"") %>% select(Player, Position)"
"0","one <- outfield %>% filter(Position==""FWD"") %>% select(all_of(f_rows)) %>% "
"0","  mutate_all(~ ifelse(is.na(.),0,.)) %>% data.matrix()"
"0","  "
"0","prediction <- predict(fwd_model, newx=one) %>% data.frame() %>%"
"0","  cbind(temp$Player) %>% cbind(temp$Position) %>%"
"0","  rename(Predicted_Points=1, Player=2, Position=3) %>%"
"0","  select(Player, everything())"
"0",""
"0","fwd <- one %>% cbind(prediction) %>%"
"0","  mutate(Position=""FWD"") %>%"
"0","  select(Player, Position, Predicted_Points, everything())"
"0",""
"0","temp <- outfield %>% filter(Position==""MID"") %>% select(Player, Position)"
"0","one <- outfield %>% filter(Position==""MID"") %>% select(all_of(m_rows)) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.)) %>% data.frame()"
"0",""
"0","prediction <- predict(ols_mid, newdata = one) %>% data.frame() %>%"
"0","  cbind(temp$Player) %>% cbind(temp$Position) %>%"
"0","  rename(Predicted_Points=1, Player=2, Position=3) %>%"
"0","  select(Player, everything())"
"0",""
"0","mid <- one %>% cbind(prediction) %>%"
"0","  mutate(Position=""MID"") %>%"
"0","  select(Player, Position, Predicted_Points, everything())"
"0",""
"0","points <- def$Points %>% as.matrix()"
"0","temp <- trends %>% ungroup() %>% filter(Position==""DEF"") %>% "
"0","  select(-c(""Points"", ""Bonus"", ""Position"")) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.)) %>% data.matrix()"
"0","one <- glmnet(temp, points, alpha=0)"
"0","five <- cv.glmnet(temp, points, alpha=0)"
"0","lambda <- five$lambda.min"
"0",""
"0","def <- trends %>% ungroup() %>% filter(Position==""DEF"") %>%"
"0","  select(all_of(c(""Player"", ""Points"")), all_of(d_rows)) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.))"
"0",""
"0","train_index <- sample(1:nrow(def), nrow(def) * 0.8)"
"0","train_data <- def[train_index, ]"
"0","x_train <- train_data %>% select(-c(""Player"", ""Points""))"
"0","  "
"0","y_train <- train_data %>% select(Points) %>% data.matrix()"
"0","test_data <- def[-train_index, ]"
"0","x_test <- test_data %>% select(-c(""Player"", ""Points"")) %>% data.matrix()"
"0","y_test <- test_data %>% select(Points) %>% data.matrix()"
"0","#dim(train_data)"
"0","#dim(test_data)"
"0",""
"0","def_model <- glmnet(x_train, y_train, alpha=0, lambda = lambda)"
"0",""
"0","temp <- outfield %>% filter(Position==""DEF"") %>% select(Player, Position)"
"0","one <- outfield %>% filter(Position==""DEF"") %>% select(all_of(d_rows)) %>%"
"0","  mutate_all(~ ifelse(is.na(.),0,.)) %>% data.matrix()"
"0","  "
"0","prediction <- predict(def_model, newx=one) %>% data.frame() %>%"
"0","  cbind(temp$Player) %>% cbind(temp$Position) %>% "
"0","  rename(Predicted_Points=1, Player=2, Position=3) %>%"
"0","  select(Player, everything())"
"0",""
"0","def <- one %>% cbind(prediction) %>%"
"0","  mutate(Position=""DEF"") %>%"
"0","  select(Player, Position, Predicted_Points, everything())"
"0",""
"0",""
